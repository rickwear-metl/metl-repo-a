{"job":{"components":{"1498":{"id":1498,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-1773186829,"x":320,"y":0,"width":32,"height":32,"inputConnectorIDs":[],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Grid Iterator Assertions - Concurrent All Types"}}}},"visible":true},"2":{"slot":2,"name":"Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"###\n# Checks that all types of variables (text/datetime/numeric) in each iteration within\n# the fixed iterator component are as expected. Multiple values in multiple iterations tested.\n\nfrom datetime import datetime\n\n##Checks the values for each variable in each iteration and sets an error message if value is not as expected  \nif IterationCount == '1' :\n  ##Creates a datetime value to compare to the datetime variable\n  date_string = '2020-1-1 00:00:00'\n  date_comparator = datetime.strptime(date_string, '%Y-%m-%d %H:%M:%S')\n  if (copiedNumeric != 100) :\n    IteratorError =  '| The value for fixed_numeric in iteration 1 is not as expected |'\n  elif (copiedText != 'value1') :\n    IteratorError = '| The value for fixed_text in iteration 1 is not as expected |'\n  elif (copiedDateTime != date_comparator) :\n    IteratorError = '| The value for fixed_datetime in iteration 1 is not as expected |'\n    \nif IterationCount == '2' :\n  date_string = '2020-2-2 00:00:00'\n  date_comparator = datetime.strptime(date_string, '%Y-%m-%d %H:%M:%S')\n  if (copiedNumeric != 200) :\n    IteratorError = '| The value for fixed_numeric in iteration 2 is not as expected |'\n  elif (copiedText != 'value2') :\n    IteratorError = '| The value for fixed_text in iteration 2 is not as expected |'\n  elif (copiedDateTime != date_comparator) :\n    IteratorError = '| The value for fixed_datetime in iteration 2 is not as expected |'\n        \nif IterationCount == '3' :\n  date_string = '2020-3-3 00:00:00'\n  date_comparator = datetime.strptime(date_string, '%Y-%m-%d %H:%M:%S')\n  if (copiedNumeric != 300) :\n    IteratorError = '| The value for fixed_numeric in iteration 3 is not as expected |'\n  elif (copiedText != 'value3') :\n    IteratorError = '| The value for fixed_text in iteration 3 is not as expected |'\n  elif (copiedDateTime != date_comparator) :\n    IteratorError = '| The value for fixed_datetime in iteration 3 is not as expected |'     \n    \nprint(copiedText);\nprint(copiedDateTime);\nprint(copiedNumeric);\nprint(IterationCount);\n\n\n# FINAL CHECK - Fails if an error has been set\nif IteratorError != 'Initial' :   \n  print (IteratorError)\n  quit(1)"}}}},"visible":true},"3":{"slot":3,"name":"Interpreter","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Python 3"}}}},"visible":true},"4":{"slot":4,"name":"Timeout","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"360"}}}},"visible":true},"5":{"slot":5,"name":"User","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Restricted"}}}},"visible":false}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[1513]},"1499":{"id":1499,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"ITERATE","implementationID":-424773870,"x":640,"y":-240,"width":32,"height":16,"inputConnectorIDs":[1507],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"MIssing values"}}}},"visible":true},"3":{"slot":3,"name":"Grid Variable","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":null}}}},"visible":true},"4":{"slot":4,"name":"Grid Variable Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"gridText"},"2":{"slot":2,"type":"STRING","value":null}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"gridNumeric"},"2":{"slot":2,"type":"STRING","value":"copiedNumeric"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"gridDateTime"},"2":{"slot":2,"type":"STRING","value":"copiedDateTime"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"iterationCount"},"2":{"slot":2,"type":"STRING","value":"IterationCount"}}}},"visible":true},"5":{"slot":5,"name":"Break on Failure","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":false},"6":{"slot":6,"name":"Concurrency","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":null}}}},"visible":true},"999":{"slot":999,"name":"Record Values In Task History","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":null}}}},"visible":true}},"expectedFailure":{"type":"VALIDATION","text":null,"componentState":null,"parameters":[{"slot":3,"message":"A value is required."},{"slot":4,"message":"Unrecognised options: gridText; gridNumeric; gridDateTime; iterationCount"},{"slot":6,"message":"A value is required."},{"slot":999,"message":"A value is required."}],"expectedExports":[]},"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"1500":{"id":1500,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"ITERATE","implementationID":-424773870,"x":640,"y":-160,"width":32,"height":16,"inputConnectorIDs":[1504],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Invalid values"}}}},"visible":true},"3":{"slot":3,"name":"Grid Variable","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"gridIterator"}}}},"visible":true},"4":{"slot":4,"name":"Grid Variable Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"gridText"},"2":{"slot":2,"type":"STRING","value":null}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"gridNumeric"},"2":{"slot":2,"type":"STRING","value":"copiedNumeric"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"gridDateTime"},"2":{"slot":2,"type":"STRING","value":"copiedDateTime"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"iterationCount"},"2":{"slot":2,"type":"STRING","value":"IterationCount"}}}},"visible":true},"5":{"slot":5,"name":"Break on Failure","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":false},"6":{"slot":6,"name":"Concurrency","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Invalid"}}}},"visible":true},"999":{"slot":999,"name":"Record Values In Task History","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Invalid"}}}},"visible":true}},"expectedFailure":{"type":"VALIDATION","text":null,"componentState":null,"parameters":[{"slot":4,"message":"Field is missing a value"},{"slot":6,"message":"Value is not a valid selection."},{"slot":999,"message":"Value is not a valid selection."}],"expectedExports":[]},"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"1536":{"id":1536,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"ITERATE","implementationID":-424773870,"x":640,"y":-80,"width":32,"height":16,"inputConnectorIDs":[1511],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Missing field value"}}}},"visible":true},"3":{"slot":3,"name":"Grid Variable","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"gridIterator"}}}},"visible":true},"4":{"slot":4,"name":"Grid Variable Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"gridText"},"2":{"slot":2,"type":"STRING","value":"copiedText"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":null},"2":{"slot":2,"type":"STRING","value":"copiedNumeric"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"gridDateTime"},"2":{"slot":2,"type":"STRING","value":"copiedDateTime"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"iterationCount"},"2":{"slot":2,"type":"STRING","value":"IterationCount"}}}},"visible":true},"5":{"slot":5,"name":"Break on Failure","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":false},"6":{"slot":6,"name":"Concurrency","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Concurrent"}}}},"visible":true},"999":{"slot":999,"name":"Record Values In Task History","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true}},"expectedFailure":{"type":"VALIDATION","text":null,"componentState":null,"parameters":[{"slot":4,"message":"Field is missing a value"}],"expectedExports":[]},"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"1537":{"id":1537,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"ITERATE","implementationID":-424773870,"x":644,"y":155,"width":32,"height":16,"inputConnectorIDs":[1510],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Mismatched types"}}}},"visible":true},"3":{"slot":3,"name":"Grid Variable","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"gridIterator"}}}},"visible":true},"4":{"slot":4,"name":"Grid Variable Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"gridText"},"2":{"slot":2,"type":"STRING","value":"copiedNumeric"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"gridNumeric"},"2":{"slot":2,"type":"STRING","value":"IterationCount"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"gridDateTime"},"2":{"slot":2,"type":"STRING","value":"copiedText"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"iterationCount"},"2":{"slot":2,"type":"STRING","value":"copiedDateTime"}}}},"visible":true},"5":{"slot":5,"name":"Break on Failure","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":false},"6":{"slot":6,"name":"Concurrency","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Concurrent"}}}},"visible":true},"999":{"slot":999,"name":"Record Values In Task History","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true}},"expectedFailure":{"type":"RUNTIME","text":null,"componentState":null,"parameters":[],"expectedExports":[]},"activationStatus":"ENABLED","outputIterationConnectorIDs":[1514],"inputIterationConnectorIDs":[]},"1538":{"id":1538,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"ITERATE","implementationID":-424773870,"x":640,"y":0,"width":32,"height":16,"inputConnectorIDs":[1502],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[1505],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Duplicate mappings"}}}},"visible":true},"3":{"slot":3,"name":"Grid Variable","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"gridIterator"}}}},"visible":true},"4":{"slot":4,"name":"Grid Variable Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"gridText"},"2":{"slot":2,"type":"STRING","value":"copiedNumeric"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"gridNumeric"},"2":{"slot":2,"type":"STRING","value":"IterationCount"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"gridDateTime"},"2":{"slot":2,"type":"STRING","value":"copiedNumeric"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"iterationCount"},"2":{"slot":2,"type":"STRING","value":"copiedDateTime"}}}},"visible":true},"5":{"slot":5,"name":"Break on Failure","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":false},"6":{"slot":6,"name":"Concurrency","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Concurrent"}}}},"visible":true},"999":{"slot":999,"name":"Record Values In Task History","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true}},"expectedFailure":{"type":"VALIDATION","text":null,"componentState":null,"parameters":[{"slot":4,"message":"Cannot map the same variable multiple times: [copiedNumeric]."}],"expectedExports":[]},"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"1539":{"id":1539,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-1773186829,"x":644,"y":155,"width":32,"height":32,"inputConnectorIDs":[],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Mismatched grid variable and variable types"}}}},"visible":true},"2":{"slot":2,"name":"Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"###\n# Variables are directly accessible: \n#   print (myvar)\n# Updating a variable:\n#   context.updateVariable('myvar', 'new-value')\n# Grid Variables are accessible via the context:\n#   print (context.getGridVariable('mygridvar'))\n# Updating a grid variable:\n#   context.updateGridVariable('mygridvar', [['list','of'],['lists','!']])\n# A database cursor can be accessed from the context (Jython only):\n#   cursor = context.cursor()\n#   cursor.execute('select count(*) from mytable')\n#   rowcount = cursor.fetchone()[0]\n###\n\n###\n# Note: Python scripts within this component are executed by the underlying virtual machine hosting Matillion ETL\n# and utilise the memory and compute of this VM, this component is not designed for large scale data processing\n# scripts involving PySpark or other such compute-intensive packages\n###\n"}}}},"visible":true},"3":{"slot":3,"name":"Interpreter","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Python 3"}}}},"visible":true},"4":{"slot":4,"name":"Timeout","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"360"}}}},"visible":true},"5":{"slot":5,"name":"User","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Restricted"}}}},"visible":false}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[1514]},"1540":{"id":1540,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"ITERATE","implementationID":-424773870,"x":640,"y":80,"width":32,"height":16,"inputConnectorIDs":[1509],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Invalid grid variable"}}}},"visible":true},"3":{"slot":3,"name":"Grid Variable","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Invalid"}}}},"visible":true},"4":{"slot":4,"name":"Grid Variable Mapping","elements":{},"visible":true},"5":{"slot":5,"name":"Break on Failure","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":false},"6":{"slot":6,"name":"Concurrency","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Concurrent"}}}},"visible":true},"999":{"slot":999,"name":"Record Values In Task History","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true}},"expectedFailure":{"type":"VALIDATION","text":null,"componentState":null,"parameters":[{"slot":3,"message":"Value is not a valid selection."},{"slot":4,"message":"No input provided"}],"expectedExports":[]},"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"1541":{"id":1541,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"ITERATE","implementationID":-424773870,"x":964,"y":-4,"width":32,"height":16,"inputConnectorIDs":[1505],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[1501,1503],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{"1":{"slot":1,"fromId":null,"fromName":"Iterations Attempted","mapTo":"IterationCount"}},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Break on failure - Yes"}}}},"visible":true},"3":{"slot":3,"name":"Grid Variable","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"gridIterator"}}}},"visible":true},"4":{"slot":4,"name":"Grid Variable Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"gridText"},"2":{"slot":2,"type":"STRING","value":"sharedText"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"gridNumeric"},"2":{"slot":2,"type":"STRING","value":"sharedNumeric"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"gridDateTime"},"2":{"slot":2,"type":"STRING","value":"sharedDateTime"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"iterationCount"},"2":{"slot":2,"type":"STRING","value":"IterationCount"}}}},"visible":true},"5":{"slot":5,"name":"Break on Failure","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true},"6":{"slot":6,"name":"Concurrency","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Sequential"}}}},"visible":true},"999":{"slot":999,"name":"Record Values In Task History","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[1515],"inputIterationConnectorIDs":[]},"1542":{"id":1542,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-1773186829,"x":964,"y":-4,"width":32,"height":32,"inputConnectorIDs":[],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Force Failure - Break on Failure Yes"}}}},"visible":true},"2":{"slot":2,"name":"Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"###\n# Variables are directly accessible: \n#   print (myvar)\n# Updating a variable:\n#   context.updateVariable('myvar', 'new-value')\n# Grid Variables are accessible via the context:\n#   print (context.getGridVariable('mygridvar'))\n# Updating a grid variable:\n#   context.updateGridVariable('mygridvar', [['list','of'],['lists','!']])\n# A database cursor can be accessed from the context (Jython only):\n#   cursor = context.cursor()\n#   cursor.execute('select count(*) from mytable')\n#   rowcount = cursor.fetchone()[0]\n###\n\n###\n# Note: Python scripts within this component are executed by the underlying virtual machine hosting Matillion ETL\n# and utilise the memory and compute of this VM, this component is not designed for large scale data processing\n# scripts involving PySpark or other such compute-intensive packages\n###\n \nif (sharedNumeric == 200) :\n\tquit(1);  "}}}},"visible":true},"3":{"slot":3,"name":"Interpreter","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Python 3"}}}},"visible":true},"4":{"slot":4,"name":"Timeout","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"360"}}}},"visible":true},"5":{"slot":5,"name":"User","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Restricted"}}}},"visible":false}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[1515]},"1543":{"id":1543,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-1773186829,"x":954,"y":-164,"width":32,"height":32,"inputConnectorIDs":[1503],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Assert number of iterations - Break on failure"}}}},"visible":true},"2":{"slot":2,"name":"Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"###\n# Checks the final number of iterations generated by the grid component\n###\n\nerror = '';\nprint (IterationCount)\n\nif (IterationCount != '2') :\n  error += '| Total number of iterations was not 2 as expected, check break on failure property |'\n  \n  # FINAL CHECK - Fails if an error has been set\nif error != '' :   \n  print (error)\n  quit(1)"}}}},"visible":true},"3":{"slot":3,"name":"Interpreter","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Python 3"}}}},"visible":true},"4":{"slot":4,"name":"Timeout","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"360"}}}},"visible":true},"5":{"slot":5,"name":"User","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Restricted"}}}},"visible":false}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"1544":{"id":1544,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-1773186829,"x":1200,"y":0,"width":32,"height":32,"inputConnectorIDs":[],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Force Failure - Break on Failure No"}}}},"visible":true},"2":{"slot":2,"name":"Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"###\n# Variables are directly accessible: \n#   print (myvar)\n# Updating a variable:\n#   context.updateVariable('myvar', 'new-value')\n# Grid Variables are accessible via the context:\n#   print (context.getGridVariable('mygridvar'))\n# Updating a grid variable:\n#   context.updateGridVariable('mygridvar', [['list','of'],['lists','!']])\n# A database cursor can be accessed from the context (Jython only):\n#   cursor = context.cursor()\n#   cursor.execute('select count(*) from mytable')\n#   rowcount = cursor.fetchone()[0]\n###\n\n###\n# Note: Python scripts within this component are executed by the underlying virtual machine hosting Matillion ETL\n# and utilise the memory and compute of this VM, this component is not designed for large scale data processing\n# scripts involving PySpark or other such compute-intensive packages\n###\n \nif (sharedNumeric == 200) :\n\tquit(1);  "}}}},"visible":true},"3":{"slot":3,"name":"Interpreter","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Python 3"}}}},"visible":true},"4":{"slot":4,"name":"Timeout","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"360"}}}},"visible":true},"5":{"slot":5,"name":"User","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Restricted"}}}},"visible":false}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[1516]},"1545":{"id":1545,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-1773186829,"x":1200,"y":-160,"width":32,"height":32,"inputConnectorIDs":[1508],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Assert number of iterations  - Don't Break on failure"}}}},"visible":true},"2":{"slot":2,"name":"Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"###\n# Checks the final number of iterations generated by the grid component\n###\n\nerror = '';\nprint (IterationCount)\n\nif (IterationCount != '3') :\n  error += '| Total number of iterations was not 3 as expected, check break on failure property |'\n  \n  # FINAL CHECK - Fails if an error has been set\nif error != '' :   \n  print (error)\n  quit(1)"}}}},"visible":true},"3":{"slot":3,"name":"Interpreter","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Python 3"}}}},"visible":true},"4":{"slot":4,"name":"Timeout","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"360"}}}},"visible":true},"5":{"slot":5,"name":"User","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Restricted"}}}},"visible":false}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"1546":{"id":1546,"inputCardinality":"ZERO","outputCardinality":"MANY","connectorHint":"UNCONDITIONAL","executionHint":"FLOW","implementationID":444132438,"x":-80,"y":0,"width":32,"height":32,"inputConnectorIDs":[],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[1512],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Start","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Start 0"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"1547":{"id":1547,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"ITERATE","implementationID":-424773870,"x":109,"y":-5,"width":32,"height":16,"inputConnectorIDs":[1512],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[1506],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Grid Iterator Sequential"}}}},"visible":true},"3":{"slot":3,"name":"Grid Variable","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"gridIterator"}}}},"visible":true},"4":{"slot":4,"name":"Grid Variable Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"gridText"},"2":{"slot":2,"type":"STRING","value":"sharedText"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"gridNumeric"},"2":{"slot":2,"type":"STRING","value":"sharedNumeric"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"gridDateTime"},"2":{"slot":2,"type":"STRING","value":"sharedDateTime"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"iterationCount"},"2":{"slot":2,"type":"STRING","value":"IterationCount"}}}},"visible":true},"5":{"slot":5,"name":"Break on Failure","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true},"6":{"slot":6,"name":"Concurrency","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Sequential"}}}},"visible":true},"999":{"slot":999,"name":"Record Values In Task History","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[1517],"inputIterationConnectorIDs":[]},"1548":{"id":1548,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"ITERATE","implementationID":-424773870,"x":1200,"y":0,"width":32,"height":16,"inputConnectorIDs":[1501],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[1508],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{"1":{"slot":1,"fromId":null,"fromName":"Iterations Attempted","mapTo":"IterationCount"}},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Break on failure - No"}}}},"visible":true},"3":{"slot":3,"name":"Grid Variable","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"gridIterator"}}}},"visible":true},"4":{"slot":4,"name":"Grid Variable Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"gridText"},"2":{"slot":2,"type":"STRING","value":"sharedText"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"gridNumeric"},"2":{"slot":2,"type":"STRING","value":"sharedNumeric"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"gridDateTime"},"2":{"slot":2,"type":"STRING","value":"sharedDateTime"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"iterationCount"},"2":{"slot":2,"type":"STRING","value":"IterationCount"}}}},"visible":true},"5":{"slot":5,"name":"Break on Failure","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true},"6":{"slot":6,"name":"Concurrency","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Sequential"}}}},"visible":true},"999":{"slot":999,"name":"Record Values In Task History","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[1516],"inputIterationConnectorIDs":[]},"1549":{"id":1549,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-1773186829,"x":109,"y":-5,"width":32,"height":32,"inputConnectorIDs":[],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Grid Iterator Assertions - Sequential All Types"}}}},"visible":true},"2":{"slot":2,"name":"Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"###\n# Checks that all types of variables (text/datetime/numeric) in each iteration within\n# the fixed iterator component are as expected. Multiple values in multiple iterations tested.\n\nfrom datetime import datetime\n\n##Checks the values for each variable in each iteration and sets an error message if value is not as expected  \nif IterationCount == '1' :\n  ##Creates a datetime value to compare to the datetime variable\n  date_string = '2020-1-1 00:00:00'\n  date_comparator = datetime.strptime(date_string, '%Y-%m-%d %H:%M:%S')\n  if (sharedNumeric != 100) :\n    IteratorError =  '| The value for fixed_numeric in iteration 1 is not as expected |'\n  elif (sharedText != 'value1') :\n    IteratorError = '| The value for fixed_text in iteration 1 is not as expected |'\n  elif (sharedDateTime != date_comparator) :\n    IteratorError = '| The value for fixed_datetime in iteration 1 is not as expected |'\n    \nif IterationCount == '2' :\n  date_string = '2020-2-2 00:00:00'\n  date_comparator = datetime.strptime(date_string, '%Y-%m-%d %H:%M:%S')\n  if (sharedNumeric != 200) :\n    IteratorError = '| The value for fixed_numeric in iteration 2 is not as expected |'\n  elif (sharedText != 'value2') :\n    IteratorError = '| The value for fixed_text in iteration 2 is not as expected |'\n  elif (sharedDateTime != date_comparator) :\n    IteratorError = '| The value for fixed_datetime in iteration 2 is not as expected |'\n        \nif IterationCount == '3' :\n  date_string = '2020-3-3 00:00:00'\n  date_comparator = datetime.strptime(date_string, '%Y-%m-%d %H:%M:%S')\n  if (sharedNumeric != 300) :\n    IteratorError = '| The value for fixed_numeric in iteration 3 is not as expected |'\n  elif (sharedText != 'value3') :\n    IteratorError = '| The value for fixed_text in iteration 3 is not as expected |'\n  elif (sharedDateTime != date_comparator) :\n    IteratorError = '| The value for fixed_datetime in iteration 3 is not as expected |'     \n    \nprint(sharedText);\nprint(sharedDateTime);\nprint(sharedNumeric);\nprint(IterationCount);\n\n\n# FINAL CHECK - Fails if an error has been set\nif IteratorError != 'Initial' :   \n  print (IteratorError)\n  quit(1)"}}}},"visible":true},"3":{"slot":3,"name":"Interpreter","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Python 3"}}}},"visible":true},"4":{"slot":4,"name":"Timeout","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"360"}}}},"visible":true},"5":{"slot":5,"name":"User","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Restricted"}}}},"visible":false}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[1517]},"1550":{"id":1550,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"ITERATE","implementationID":-424773870,"x":320,"y":0,"width":32,"height":16,"inputConnectorIDs":[1506],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[1502,1504,1507,1509,1510,1511],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Grid Iterator Concurrent"}}}},"visible":true},"3":{"slot":3,"name":"Grid Variable","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"gridIterator"}}}},"visible":true},"4":{"slot":4,"name":"Grid Variable Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"gridText"},"2":{"slot":2,"type":"STRING","value":"copiedText"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"gridNumeric"},"2":{"slot":2,"type":"STRING","value":"copiedNumeric"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"gridDateTime"},"2":{"slot":2,"type":"STRING","value":"copiedDateTime"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"iterationCount"},"2":{"slot":2,"type":"STRING","value":"IterationCount"}}}},"visible":true},"5":{"slot":5,"name":"Break on Failure","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":false},"6":{"slot":6,"name":"Concurrency","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Concurrent"}}}},"visible":true},"999":{"slot":999,"name":"Record Values In Task History","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[1513],"inputIterationConnectorIDs":[]}},"successConnectors":{},"failureConnectors":{},"unconditionalConnectors":{"1501":{"id":1501,"sourceID":1541,"targetID":1548},"1502":{"id":1502,"sourceID":1550,"targetID":1538},"1503":{"id":1503,"sourceID":1541,"targetID":1543},"1504":{"id":1504,"sourceID":1550,"targetID":1500},"1505":{"id":1505,"sourceID":1538,"targetID":1541},"1506":{"id":1506,"sourceID":1547,"targetID":1550},"1507":{"id":1507,"sourceID":1550,"targetID":1499},"1508":{"id":1508,"sourceID":1548,"targetID":1545},"1509":{"id":1509,"sourceID":1550,"targetID":1540},"1510":{"id":1510,"sourceID":1550,"targetID":1537},"1511":{"id":1511,"sourceID":1550,"targetID":1536},"1512":{"id":1512,"sourceID":1546,"targetID":1547}},"trueConnectors":{},"falseConnectors":{},"iterationConnectors":{"1513":{"id":1513,"sourceID":1550,"targetID":1498},"1514":{"id":1514,"sourceID":1537,"targetID":1539},"1515":{"id":1515,"sourceID":1541,"targetID":1542},"1516":{"id":1516,"sourceID":1548,"targetID":1544},"1517":{"id":1517,"sourceID":1547,"targetID":1549}},"noteConnectors":{},"notes":{"1495":{"id":1495,"x":-11,"y":-122,"width":427,"height":302,"text":"Grid Iterator - Sequential and concurrent with all variable types (Text/Numeric/Datetime). 3 Iterations for each iterator. Python component asserts variable values are mapped from grid to set variables as expected for each iteration and fails with an error message if any are not as expected.","colour":"00ce4f"},"1496":{"id":1496,"x":520,"y":-287,"width":241,"height":541,"text":"Expected Validation & Runtime Failures","colour":"00ce4f"},"1497":{"id":1497,"x":846,"y":-230,"width":468,"height":361,"text":"Break on Failure - If yes, iterations should stop when failure occurs (2), if no iterations should continue after failure (3)","colour":"00ce4f"}},"variables":{"IterationCount":{"definition":{"name":"IterationCount","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":""},"IteratorError":{"definition":{"name":"IteratorError","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":"Initial"},"copiedDateTime":{"definition":{"name":"copiedDateTime","type":"DATETIME","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":""},"copiedNumeric":{"definition":{"name":"copiedNumeric","type":"DECIMAL","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":""},"copiedText":{"definition":{"name":"copiedText","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":""},"sharedDateTime":{"definition":{"name":"sharedDateTime","type":"DATETIME","scope":"TASKBATCH","description":"","visibility":"PUBLIC"},"value":""},"sharedNumeric":{"definition":{"name":"sharedNumeric","type":"DECIMAL","scope":"TASKBATCH","description":"","visibility":"PUBLIC"},"value":""},"sharedText":{"definition":{"name":"sharedText","type":"TEXT","scope":"TASKBATCH","description":"","visibility":"PUBLIC"},"value":""}},"grids":{"gridIterator":{"definition":{"name":"gridIterator","scope":"BRANCH","definitions":[{"name":"gridText","type":"TEXT"},{"name":"gridNumeric","type":"DECIMAL"},{"name":"gridDateTime","type":"DATETIME"},{"name":"iterationCount","type":"TEXT"}],"description":"","visibility":"PUBLIC"},"values":[{"values":["value1","100","2020-01-01 00:00:00","1"]},{"values":["value2","200","2020-02-02 00:00:00","2"]},{"values":["value3","300","2020-03-03 00:00:00","3"]}]}}},"info":{"name":"Grid Iterator","description":null,"type":"ORCHESTRATION","tag":"786ab848-a8c8-49c1-b04a-4886d268a4eb"}}